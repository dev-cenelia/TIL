ES Module 정리
1. 모듈(Module)이란?

자바스크립트 코드를 파일 단위로 나누어 관리하는 방식.
각 파일이 독립적인 모듈처럼 동작하며 내부 변수나 함수가 전역으로 퍼지지 않도록 막아준다.
필요한 기능만 import/export로 명확하게 가져오고 내보낼 수 있다.

2. 왜 필요한가?

예전 방식(script 태그 + 전역 함수)은 다음 문제가 있었다:

파일 하나에 코드가 수천 줄씩 쌓임

함수 이름 충돌 발생

어떤 코드가 어디서 쓰이는지 의존성 파악 어려움

필요한 JS만 로드하기가 어려워 성능 저하 발생

레거시 구조(detail.js 3000줄)처럼 유지보수가 힘들어짐

ES Module은 이 문제를 해결하기 위해 생겼고,
import/export 문법을 통해 의존성 명시, 파일 단위 분리, 전역 오염 방지가 가능하다.

3. export 종류
3-1. Named Export

여러 개를 내보낼 수 있고, 이름을 정확히 써서 가져와야 한다.

// utils.js
export const PI = 3.14;
export function add(a, b) {
  return a + b;
}

// 사용
import { PI, add } from './utils.js';

3-2. Default Export

한 파일에 하나만 존재. import 시 이름을 마음대로 지정 가능.

// calc.js
export default function calc(a, b) {
  return a + b;
}

// 사용
import calc from './calc.js';

4. import 방식
4-1. 이름 변경
import { add as plus } from './utils.js';

4-2. 전체 가져오기
import * as MathUtils from './utils.js';
MathUtils.add(1, 2);

5. HTML에서 ESM 사용

브라우저 환경에서 모듈을 사용하려면 script에 type="module"을 붙인다.

<script type="module" src="main.js"></script>

6. 노프레임워크 vs ES Module 비교
노프레임워크(구식 방식)

<script src="...">로 여러 파일 로드

모든 함수/변수가 전역으로 퍼짐

파일 로드 순서에 따라 동작이 달라짐

detail.js 같은 파일 하나에 수천 줄 혼합됨

의존성을 명확히 파악하기 어려움

필요한 JS만 골라 사용하기 어려워 성능 저하

ES Module

파일마다 독립적인 스코프

import/export로 명확하게 의존성 표현

전역 충돌 없음

필요한 기능만 선택적으로 가져와서 사용 가능

React, Vite, Next.js 등 현대 FE 환경의 기본 구조

7. CSS Module과의 공통 개념

CSS Module(*.module.css)과 JS Module은 비슷한 목적을 가진다.

JS 모듈
기능/함수를 파일 단위로 분리해 충돌 방지

CSS 모듈
클래스명을 파일 단위로 지역화하여 스타일 충돌 방지

둘 다 “전역 오염을 막고 파일 단위로 안전하게 관리한다”는 철학을 공유한다.

8. 트리쉐이킹, 코드스플릿(간단 개념)

트리쉐이킹: import되지 않거나 사용되지 않는 코드는 자동 제거한다.

코드 스플릿: 한 번에 모든 JS를 로드하지 않고 필요한 시점에만 로드한다.

노프레임워크에서는 거의 불가능한 기능이며,
ES Module + 번들러(React, Vite 등) 환경에서 자동 제공되는 최적화다.
